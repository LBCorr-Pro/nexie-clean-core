{
  "description": "Defines the Firestore structure for the Invitation (Convite) Module, following the final architecture.",
  "operational_settings": {
    "collection_path_template": "/Global/master/config/modules/invite/settings",
    "description": "Stores versions of the Invitation module's operational configuration. The application loads the document with the latest 'createdAt' timestamp. A similar structure exists under `/Global/{instanceId}/config/modules/invite/settings` for overrides.",
    "documents": [
      {
        "id": "auto_generated_version_id",
        "fields": {
          "prefix": { "type": "string", "optional": true },
          "code_length": { "type": "number" },
          "validity_type": { "type": "string", "enum": ["days", "hours"] },
          "validity_value": { "type": "number" },
          "email_default_sender": { "type": "string" },
          "email_template": { "type": "string" },
          "whatsapp_template": { "type": "string" },
          "createdAt": { "type": "timestamp" }
        }
      }
    ]
  },
  "generated_invites": {
    "collection_path_template": "/Global/master/invite_module_data/generated_invites",
    "description": "Stores individual invitation records generated by the module. This is application data, not configuration.",
    "documents": [
      {
        "id": "auto_generated_invite_id",
        "fields": {
          "code": { "type": "string" },
          "slug": { "type": "string" },
          "status": { "type": "string", "enum": ["pending", "accepted", "expired", "revoked"] },
          "expires_at": { "type": "timestamp" },
          "instanceId_context": { "type": "string", "optional": true },
          "issued_to_email": { "type": "string", "optional": true },
          "target_access_level_id": { "type": "string", "optional": true },
          "createdAt": { "type": "timestamp" }
        }
      }
    ]
  }
}
